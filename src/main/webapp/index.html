<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Elif Åžat</title>

<link rel="stylesheet"
	href="css/bootstrap.min.css">


<style type="text/css">

#footer {
    clear: both;
    position: relative;
    z-index: 10;
    height: 3em;
    margin-top: -3em;
}
</style>
</head>
<body>


	<div class="container">
		<!--<div class="py-5 text-center">
			<img class="d-block mx-auto mb-4"
				src="images/sehitler-aniti.png"
				alt="" width="72" height="72">
			<h2>Search Engine</h2>
		</div>-->
		<div class="text-center">
			<h2>Search Engine</h2>
		</div>

		<div class="row">
			<div class="col-md-12 order-md-1">

				<div class="input-group mb-3">
					<input type="text" id="searchInput" class="form-control"
						placeholder="seacrh"
						aria-label="search" aria-describedby="basic-addon2" >
					<div class="input-group-append">
						<span class="input-group-text" id="basic-addon2" onClick="searchCall()">E</span>
					</div>
				</div>
				
				<div class="row" id="error-message-div" style="display : none;">
					<div class="alert alert-danger" role="alert">
					  <span id="error-message">dss</span>
					</div>
				</div>
				
				<div class="row">
					<div class="card" style="width: 100%;">
					  <ul class="list-group list-group-flush" id="seacrhResult">
					    
					  </ul>
					</div>
				</div>

			</div>
		</div>

	</div>
	
	
	<div id="wait" style="display:none;width:69px;height:89px;border:1px solid black;position:absolute;top:50%;left:50%;padding:2px;"><img src='images/ajax_wait_loader.gif' width="64" height="64" /><br>Loading..</div>
	
		<footer class="my-5 pt-5 text-muted text-center text-small">
			<p class="mb-1">&copy; 2018-2019 Bitirme Projesi</p>
			<ul class="list-inline">
				<li class="list-inline-item"><a href="https://elifsat.orgfree.com">elifsat.orgfree.com</a></li>
			</ul>
		</footer>

	

	<script src="js/jquery-3.3.1.slim.min.js"></script>
	<script src="js/jquery.js"></script>

	<script src="js/jquery.blockUI.js"></script>
	<script src="js/bootstrap.min.js"></script>
		
	<script>
	
		$( document ).ready(function() {
			
			 $(document).ajaxStop($.unblockUI); 

			 /*$(document).ajaxStart(function(){
		        $("#wait").css("display", "block");
		      });
	    	 $(document).ajaxComplete(function(){
		        $("#wait").css("display", "none");
		     });*/
			    
		});
		
		function searchCall(){
			if($("#searchInput").val() && $.trim($("#searchInput").val())){
				call($("#searchInput").val());
			}
		}

		$("#searchInput").on("keyup", function(event){

			 if (event.keyCode === 13) {
					call($("#searchInput").val());
			  }

		});
		
		function call(key){
			$("#seacrhResult").html("");
			
			console.log(key);
			
			$("#error-message-div").hide();
			
			$.blockUI({ message: '<h1><img src="images/ajax_wait_loader.gif" /> Please wait...</h1>' });
			
			$.ajax({
				url: 'http://localhost:8060/seacrhengine/services/seacrhengine/search?key=' + key, 
				type: 'GET',
				cache: false,
				success: function(result){
					console.log(result);
					
					if(result.status){
						var resultList = result.result;

						append(resultList);
					
					} else {
						$("#error-message-div").text(result.message);
						$("#error-message-div").show();
					}
					
		    	},
		    	error(xhr,status,error){
		    		
		    	}
			});
		}
		
		function append(searchList){
			for(var i = 0; i< searchList.length; i++){
				var li = "<li class='list-group-item'>";
				
				li = li + "<a href='" + searchList[i].link  + "'>" + searchList[i].htmlSnippet + "</a>";
				
				li = li + '</li>';
				$("#seacrhResult").append(li)
			}
		}
		
	</script>
</body>
</html>

